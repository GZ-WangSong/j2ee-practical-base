<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>项目首页 | 启动页</title>

    <!-- 导入 element-ui 的样式 -->
    <link rel="stylesheet" href="./element-ui/lib/theme-chalk/index.css">
</head>

<body>
<div id="app">
    <!-- 第1次作业 -->
    <el-descriptions title="第1次作业">
        <el-descriptions-item label="内容">
            <el-tag size="small">第一次作业 | 环境搭建运行 | 测试正常</el-tag>
        </el-descriptions-item>
    </el-descriptions>
    <el-divider></el-divider>
    <div>
        <!-- 第2次作业 -->
        <el-descriptions title="第2次作业">
            <el-descriptions-item>
                <el-button type="primary" @click="goLogin">登录功能</el-button>
            </el-descriptions-item>
        </el-descriptions>

        <el-divider></el-divider>
        <!-- 第三次作业 -->
        <el-descriptions title="第3次作业">
            <el-descriptions-item>
                <el-button type="success" @click="getMessage">HelloWorldServlet功能</el-button>
                <el-button type="success" @click="shared">sharedServlet功能</el-button>
                <el-button type="success" @click="validateShared">validateSharedServlet功能</el-button>
                <el-button type="success" @click="goCourse">查看课表</el-button>
            </el-descriptions-item>
        </el-descriptions>

        <el-divider></el-divider>
        <!-- 第4次作业 -->
        <el-descriptions title="第4次作业">
            <el-descriptions-item>
                <el-button type="warning" @click="login">登录入口</el-button>
            </el-descriptions-item>
        </el-descriptions>

    </div>

    <el-dialog title="提示" :visible.sync="centerDialogVisible" width="30%" center>
        <span>{{ msg }}</span>
        <span slot="footer" class="dialog-footer">
            <el-button type="primary" @click="centerDialogVisible = false">确 定</el-button>
        </span>
    </el-dialog>

    <!-- 下面是最初的版本 -->
    <!-- 第1次作业 -->
    <!--    <p>第一次作业 | 环境搭建运行 | 测试正常</p>-->
    <!-- 第2次作业 -->
    <!--    <input type="button" value="去登录" onclick="goLogin()"/>
        <br>
    -->

    <!-- 第3次作业 -->
    <!--    <form action="helloWorldServlet" method="get">
            <input type="submit" value="测试 HelloWorldServlet 功能">
        </form>
        <br>
        <form action="sharedServlet" method="get">
            <input type="submit" value="测试 sharedServlet">
        </form>
        <br>
        <form action="validateSharedServlet" method="get">
            <input type="submit" value="测试 validateSharedServlet">
        </form>
        <br>
        <input type="button" value="查看课程表" onclick="goCourse()"/>
    <br><br>
    -->
    <!-- 第4次作业 -->
    <!--    <input type="button" value="登录" onclick="login()"/>-->

</div>

<!-- 导入vue.js 2.0 版本 -->
<script src="./lib/vue.js"></script>
<!-- 导入 axios 用于发起请求 -->
<script src="./lib/axios.js"></script>
<!-- 导入 element-ui 的js文件 -->
<script src="./element-ui/lib/index.js"></script>

<script>
    const vm = new Vue({
        // 指定挂载区域
        el: '#app',
        // 数据区域
        // 函数方式，在这里用这种方式，导致前面代码喜欢抛异常，很是不爽，改用对象形式
        // data() {
        //     return {
        //         centerDialogVisible: false,
        //         msg: ''
        //     }
        // },
        // 对象形式
        data: {
            centerDialogVisible: false,
            msg: ''
        },
        // 方法区域
        methods: {
            goLogin() {
                location.href = './login.html'
            },
            getMessage() {
                let that = this
                axios.get('helloWorldServlet').then(resp => {
                    if (resp.data != null) {
                        that.msg = resp.data

                        that.$message({
                            message: '数据请求成功！',
                            type: 'success'
                        })

                        that.centerDialogVisible = true
                    } else {
                        that.$message.error('错了哦！')
                    }
                })
            },
            shared() {
                let that = this
                axios.get('sharedServlet').then(resp => {
                    if (resp.data != null) {
                        that.msg = resp.data

                        that.$message({
                            message: '数据请求成功！',
                            type: 'success'
                        })

                        that.centerDialogVisible = true
                    } else {
                        that.$message.error('错了哦！')
                    }
                })
            },
            validateShared() {
                let that = this
                axios.get('validateSharedServlet').then(resp => {
                    if (resp.data != null) {
                        that.msg = resp.data

                        that.$message({
                            message: '数据请求成功！',
                            type: 'success'
                        })

                        that.centerDialogVisible = true
                    } else {
                        that.$message.error('错了哦！')
                    }
                })
            },
            login() {
                location.href = 'login.jsp'
            },
            goCourse() {
                location.href = 'course.jsp'
            }
        }

    })
</script>
</body>

</html>